<%- include('layouts/header') -%>

<div class="container mx-auto p-4 md:p-8">
  <div class="max-w-4xl mx-auto">
    <div class="mb-8">
      <a href="/" class="btn btn-outline">&larr; Kembali ke Daftar</a>
    </div>

    <% if (meal) { %>
    <div class="card lg:card-side bg-base-100 shadow-xl">
      <figure class="w-full lg:w-2/5">
        <img
          src="<%= meal.strMealThumb %>"
          alt="<%= meal.strMeal %>"
          class="object-cover w-full h-full"
        />
      </figure>
      <div class="card-body lg:w-3/5">
        <h1 class="card-title text-3xl md:text-4xl font-bold">
          <%= meal.strMeal %>
        </h1>
        <div class="flex items-center gap-4 my-2">
          <% if (meal.strCategory) { %>
          <span class="badge badge-lg badge-primary"><%= meal.strCategory %></span>
          <% } %>
          <% if (meal.strArea) { %>
          <span class="badge badge-lg badge-secondary"><%= meal.strArea %></span>
          <% } %>
        </div>
        <p class="py-4">
          <%= meal.strInstructions.substring(0, 200) %>...
        </p>
      </div>
    </div>

    <div class="mt-8">
      <div class="prose max-w-none">
        <h2 class="text-2xl font-bold mb-4">Ingredients</h2>
        <ul class="list-disc list-inside">
          <% for (let i = 1; i <= 20; i++) { %>
            <% if (meal['strIngredient' + i]) { %>
              <li><%= meal['strMeasure' + i] %> <%= meal['strIngredient' + i] %></li>
            <% } %>
          <% } %>
        </ul>

        <h2 class="text-2xl font-bold mt-8 mb-4">Instructions</h2>
        <ol class="list-decimal list-inside">
            <% meal.strInstructions.split('\r\n').forEach(instruction => { %>
                <% if (instruction) { %>
                    <li><%= instruction %></li>
                <% } %>
            <% }); %>
        </ol>
      </div>
    </div>
    <% } else { %>
      <div class="text-center">
        <p>Resep tidak ditemukan.</p>
        <a href="/" class="btn btn-primary mt-4">Kembali ke Beranda</a>
      </div>
    <% } %>
  </div>
</div>

<%- include('layouts/footer') -%>